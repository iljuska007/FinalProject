{"version":3,"sources":["game.js"],"names":["canvas","document","getElementById","ctx","getContext","startButton","title","helpButton","helpModal","closeHelpButton","gameOverSound","Audio","resizeCanvas","width","window","innerWidth","height","innerHeight","addEventListener","pipeTop","Image","src","pipeBottom","gameOverImage","backgroundImage1","backgroundImage2","bird","x","y","gravity","lift","velocity","pipes","pipeWidth","pipeGap","frameCount","score","isGameOver","level","bestScore","localStorage","getItem","parseInt","e","key","resetGame","beepSound","volume","play","helloSound","style","display","startCountdown","countdown","countdownInterval","setInterval","clearRect","fillStyle","font","textAlign","textBaseline","fillText","clearInterval","gameLoop","levelUp","alert","backgroundImage","update","pipeY","Math","random","push","filter","pipe","forEach","setItem","location","href","draw","drawImage","birdImage","save","translate","scale","restore","removeItem","requestAnimationFrame"],"mappings":";;AAAA,IAAMA,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAf;AACA,IAAMC,GAAG,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAZ;AACA,IAAMC,WAAW,GAAGJ,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAApB,C,CAA6D;;AAC7D,IAAMI,KAAK,GAAGL,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAd,C,CAAiD;;AACjD,IAAMK,UAAU,GAAGN,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAnB,C,CAA0D;;AAC1D,IAAMM,SAAS,GAAGP,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAlB,C,CAAwD;;AACxD,IAAMO,eAAe,GAAGR,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAxB,C,CAA8D;AAE9D;;AACA,IAAMQ,aAAa,GAAG,IAAIC,KAAJ,CAAU,uEAAV,CAAtB,C,CAEA;;AACA,SAASC,YAAT,GAAwB;AACpBZ,EAAAA,MAAM,CAACa,KAAP,GAAeC,MAAM,CAACC,UAAtB;AACAf,EAAAA,MAAM,CAACgB,MAAP,GAAgBF,MAAM,CAACG,WAAvB;AACH;;AACDL,YAAY;AACZE,MAAM,CAACI,gBAAP,CAAwB,QAAxB,EAAkCN,YAAlC,E,CAAkD;AAElD;;AACA,IAAMO,OAAO,GAAG,IAAIC,KAAJ,EAAhB;AACAD,OAAO,CAACE,GAAR,GAAc,4FAAd,C,CAA6G;;AAE7G,IAAMC,UAAU,GAAG,IAAIF,KAAJ,EAAnB;AACAE,UAAU,CAACD,GAAX,GAAiB,4FAAjB,C,CAAgH;AAEhH;;AACA,IAAME,aAAa,GAAG,IAAIH,KAAJ,EAAtB;AACAG,aAAa,CAACF,GAAd,GAAoB,8FAApB,C,CAAoH;AAEpH;;AACA,IAAMG,gBAAgB,GAAG,IAAIJ,KAAJ,EAAzB;AACAI,gBAAgB,CAACH,GAAjB,GAAuB,4EAAvB,C,CAAqG;AAErG;;AACA,IAAMI,gBAAgB,GAAG,IAAIL,KAAJ,EAAzB;AACAK,gBAAgB,CAACJ,GAAjB,GAAuB,4FAAvB,C,CAAqH;;AAErH,IAAIK,IAAI,GAAG;AACPC,EAAAA,CAAC,EAAE,GADI;AAEPC,EAAAA,CAAC,EAAE5B,MAAM,CAACgB,MAAP,GAAgB,CAFZ;AAGPH,EAAAA,KAAK,EAAE,EAHA;AAGK;AACZG,EAAAA,MAAM,EAAE,EAJD;AAIK;AACZa,EAAAA,OAAO,EAAE,GALF;AAMPC,EAAAA,IAAI,EAAE,CAAC,EANA;AAMK;AACZC,EAAAA,QAAQ,EAAE;AAPH,CAAX;AAUA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,SAAS,GAAG,EAAhB,C,CAAqB;;AACrB,IAAIC,OAAO,GAAGlC,MAAM,CAACgB,MAAP,GAAgB,CAA9B,C,CAAiC;;AACjC,IAAImB,UAAU,GAAG,CAAjB;AACA,IAAIC,KAAK,GAAG,CAAZ;AACA,IAAIC,UAAU,GAAG,KAAjB,C,CAAwB;;AACxB,IAAIC,KAAK,GAAG,CAAZ,C,CAAgB;AAEhB;;AACA,IAAIC,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,IAAoCC,QAAQ,CAACF,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAD,CAA5C,GAAkF,CAAlG,C,CAEA;;AACAxC,QAAQ,CAACiB,gBAAT,CAA0B,SAA1B,EAAqC,UAACyB,CAAD,EAAO;AACxC,MAAIA,CAAC,CAACC,GAAF,KAAU,GAAV,IAAiBD,CAAC,CAACC,GAAF,KAAU,UAA/B,EAA2C;AAAG;AAC1C,QAAIP,UAAJ,EAAgB;AACZQ,MAAAA,SAAS,GADG,CACC;AAChB,KAFD,MAEO;AACHnB,MAAAA,IAAI,CAACK,QAAL,GAAgBL,IAAI,CAACI,IAArB;AACA,UAAMgB,SAAS,GAAG,IAAInC,KAAJ,CAAU,8DAAV,CAAlB;AACAmC,MAAAA,SAAS,CAACC,MAAV,GAAmB,GAAnB,CAHG,CAGsB;;AACzBD,MAAAA,SAAS,CAACE,IAAV,GAJG,CAIgB;AACtB;AACJ;AACJ,CAXD,E,CAaA;;AACA,IAAMC,UAAU,GAAG,IAAItC,KAAJ,CAAU,+DAAV,CAAnB,C,CAEA;;AACAN,WAAW,CAACa,gBAAZ,CAA6B,OAA7B,EAAsC,YAAM;AACxCb,EAAAA,WAAW,CAAC6C,KAAZ,CAAkBC,OAAlB,GAA4B,MAA5B,CADwC,CACJ;;AACpC7C,EAAAA,KAAK,CAAC4C,KAAN,CAAYC,OAAZ,GAAsB,MAAtB,CAFwC,CAEV;;AAC9BF,EAAAA,UAAU,CAACD,IAAX,GAHwC,CAGpB;AAEpB;;AACAhD,EAAAA,MAAM,CAACkD,KAAP,CAAaC,OAAb,GAAuB,OAAvB,CANwC,CAMR;AAEhC;;AACAC,EAAAA,cAAc;AACjB,CAVD,E,CAYA;;AACA,IAAIC,SAAS,GAAG,CAAhB;;AACA,SAASD,cAAT,GAA0B;AACtB,MAAME,iBAAiB,GAAGC,WAAW,CAAC,YAAM;AACxCpD,IAAAA,GAAG,CAACqD,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBxD,MAAM,CAACa,KAA3B,EAAkCb,MAAM,CAACgB,MAAzC,EADwC,CACW;;AACnDb,IAAAA,GAAG,CAACsD,SAAJ,GAAgB,OAAhB;AACAtD,IAAAA,GAAG,CAACuD,IAAJ,GAAW,aAAX;AACAvD,IAAAA,GAAG,CAACwD,SAAJ,GAAgB,QAAhB;AACAxD,IAAAA,GAAG,CAACyD,YAAJ,GAAmB,QAAnB;AACAzD,IAAAA,GAAG,CAAC0D,QAAJ,CAAaR,SAAb,EAAwBrD,MAAM,CAACa,KAAP,GAAe,CAAvC,EAA0Cb,MAAM,CAACgB,MAAP,GAAgB,CAA1D,EANwC,CAMuB;AAE/D;;AACA,QAAIqC,SAAS,KAAK,CAAlB,EAAqB;AACjBS,MAAAA,aAAa,CAACR,iBAAD,CAAb,CADiB,CACiB;;AAClCS,MAAAA,QAAQ,GAFS,CAEL;AACf;;AAEDV,IAAAA,SAAS,GAd+B,CAc1B;AACjB,GAfoC,EAelC,GAfkC,CAArC,CADsB,CAgBZ;AACb,C,CAED;;;AACA9C,UAAU,CAACW,gBAAX,CAA4B,OAA5B,EAAqC,YAAM;AACvCV,EAAAA,SAAS,CAAC0C,KAAV,CAAgBC,OAAhB,GAA0B,MAA1B;AACH,CAFD,E,CAIA;;AACA1C,eAAe,CAACS,gBAAhB,CAAiC,OAAjC,EAA0C,YAAM;AAC5CV,EAAAA,SAAS,CAAC0C,KAAV,CAAgBC,OAAhB,GAA0B,MAA1B;AACH,CAFD,E,CAIA;;AACA,SAASa,OAAT,GAAmB;AACfC,EAAAA,KAAK,CAAC,uCAAD,CAAL;AACA3B,EAAAA,KAAK,GAAG,CAAR,CAFe,CAEH;;AACZ4B,EAAAA,eAAe,GAAGzC,gBAAlB,CAHe,CAGqB;;AACpCS,EAAAA,OAAO,GAAGlC,MAAM,CAACgB,MAAP,GAAgB,CAA1B,CAJe,CAIe;AACjC,C,CAED;;;AACA,SAASmD,MAAT,GAAkB;AACd,MAAI9B,UAAJ,EAAgB,OADF,CACU;AAExB;;AACAX,EAAAA,IAAI,CAACK,QAAL,IAAiBL,IAAI,CAACG,OAAtB;AACAH,EAAAA,IAAI,CAACK,QAAL,IAAiB,IAAjB;AACAL,EAAAA,IAAI,CAACE,CAAL,IAAUF,IAAI,CAACK,QAAf,CANc,CAQd;;AACA,MAAIL,IAAI,CAACE,CAAL,GAAS5B,MAAM,CAACgB,MAAP,GAAgBU,IAAI,CAACV,MAAlC,EAA0CU,IAAI,CAACE,CAAL,GAAS5B,MAAM,CAACgB,MAAP,GAAgBU,IAAI,CAACV,MAA9B;AAC1C,MAAIU,IAAI,CAACE,CAAL,GAAS,CAAb,EAAgBF,IAAI,CAACE,CAAL,GAAS,CAAT,CAVF,CAYd;;AACA,MAAIO,UAAU,GAAG,GAAb,KAAqB,CAAzB,EAA4B;AAAE;AAC1B,QAAIiC,KAAK,GAAGC,IAAI,CAACC,MAAL,MAAiBtE,MAAM,CAACgB,MAAP,GAAgBkB,OAAhB,GAA0B,EAA3C,IAAiD,EAA7D;AACAF,IAAAA,KAAK,CAACuC,IAAN,CAAW;AAAE5C,MAAAA,CAAC,EAAE3B,MAAM,CAACa,KAAZ;AAAmBe,MAAAA,CAAC,EAAEwC;AAAtB,KAAX;AACH,GAhBa,CAkBd;;;AACApC,EAAAA,KAAK,GAAGA,KAAK,CAACwC,MAAN,CAAa,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAAC9C,CAAL,GAASM,SAAT,GAAqB,CAAzB;AAAA,GAAjB,CAAR;AACAD,EAAAA,KAAK,CAAC0C,OAAN,CAAc,UAAAD,IAAI,EAAI;AAClBA,IAAAA,IAAI,CAAC9C,CAAL,IAAU,CAAV,CADkB,CAGlB;;AACA,QACID,IAAI,CAACC,CAAL,GAAS8C,IAAI,CAAC9C,CAAL,GAASM,SAAlB,IACAP,IAAI,CAACC,CAAL,GAASD,IAAI,CAACb,KAAd,GAAsB4D,IAAI,CAAC9C,CAD3B,KAECD,IAAI,CAACE,CAAL,GAAS6C,IAAI,CAAC7C,CAAd,IAAmBF,IAAI,CAACE,CAAL,GAASF,IAAI,CAACV,MAAd,GAAuByD,IAAI,CAAC7C,CAAL,GAASM,OAFpD,CADJ,EAIE;AACEG,MAAAA,UAAU,GAAG,IAAb,CADF,CACqB;;AACnB,UAAID,KAAK,GAAGG,SAAZ,EAAuB;AACnBA,QAAAA,SAAS,GAAGH,KAAZ,CADmB,CACA;;AACnBI,QAAAA,YAAY,CAACmC,OAAb,CAAqB,WAArB,EAAkCpC,SAAlC,EAFmB,CAE2B;AACjD,OALH,CAOE;;;AACA7B,MAAAA,aAAa,CAACsC,IAAd;AACH,KAjBiB,CAmBlB;;;AACA,QAAIyB,IAAI,CAAC9C,CAAL,GAASM,SAAT,KAAuBP,IAAI,CAACC,CAAhC,EAAmC;AAC/BS,MAAAA,KAAK;AACR;AACJ,GAvBD,EApBc,CA6Cd;;AACA,MAAIA,KAAK,IAAI,CAAT,IAAcE,KAAK,KAAK,CAA5B,EAA+B;AAC3B0B,IAAAA,OAAO;AACV,GAhDa,CAkDd;;;AACJ,MAAI5B,KAAK,IAAI,CAAT,IAAcE,KAAK,KAAK,CAA5B,EAA+B;AAC3B;AACAE,IAAAA,YAAY,CAACmC,OAAb,CAAqB,YAArB,EAAmCvC,KAAnC;AACAtB,IAAAA,MAAM,CAAC8D,QAAP,CAAgBC,IAAhB,GAAuB,UAAvB,CAH2B,CAGQ;AACtC;;AAGG1C,EAAAA,UAAU;AACb;;AAED,SAAS2C,IAAT,GAAgB;AACZ3E,EAAAA,GAAG,CAACqD,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBxD,MAAM,CAACa,KAA3B,EAAkCb,MAAM,CAACgB,MAAzC,EADY,CAGZ;;AACA,MAAIsB,KAAK,KAAK,CAAd,EAAiB;AACbnC,IAAAA,GAAG,CAAC4E,SAAJ,CAAcvD,gBAAd,EAAgC,CAAhC,EAAmC,CAAnC,EAAsCxB,MAAM,CAACa,KAA7C,EAAoDb,MAAM,CAACgB,MAA3D;AACH,GAFD,MAEO;AACHb,IAAAA,GAAG,CAAC4E,SAAJ,CAActD,gBAAd,EAAgC,CAAhC,EAAmC,CAAnC,EAAsCzB,MAAM,CAACa,KAA7C,EAAoDb,MAAM,CAACgB,MAA3D;AACH,GARW,CAUZ;;;AACA,MAAMgE,SAAS,GAAG,IAAI5D,KAAJ,EAAlB;AACA4D,EAAAA,SAAS,CAAC3D,GAAV,GAAgB,8EAAhB,CAZY,CAYqF;;AACjGlB,EAAAA,GAAG,CAAC4E,SAAJ,CAAcC,SAAd,EAAyBtD,IAAI,CAACC,CAA9B,EAAiCD,IAAI,CAACE,CAAtC,EAAyCF,IAAI,CAACb,KAA9C,EAAqDa,IAAI,CAACV,MAA1D,EAbY,CAeZ;;AACAgB,EAAAA,KAAK,CAAC0C,OAAN,CAAc,UAAAD,IAAI,EAAI;AAClB;AACAtE,IAAAA,GAAG,CAAC8E,IAAJ,GAFkB,CAEN;;AACZ9E,IAAAA,GAAG,CAAC+E,SAAJ,CAAcT,IAAI,CAAC9C,CAAnB,EAAsB8C,IAAI,CAAC7C,CAA3B,EAHkB,CAGa;;AAC/BzB,IAAAA,GAAG,CAACgF,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,EAJkB,CAIA;;AAClBhF,IAAAA,GAAG,CAAC4E,SAAJ,CAAc5D,OAAd,EAAuB,CAAvB,EAA0B,CAA1B,EAA6Bc,SAA7B,EAAwCwC,IAAI,CAAC7C,CAA7C,EALkB,CAKgC;;AAClDzB,IAAAA,GAAG,CAACiF,OAAJ,GANkB,CAMH;AAEf;;AACAjF,IAAAA,GAAG,CAAC4E,SAAJ,CAAczD,UAAd,EAA0BmD,IAAI,CAAC9C,CAA/B,EAAkC8C,IAAI,CAAC7C,CAAL,GAASM,OAA3C,EAAoDD,SAApD,EAA+DjC,MAAM,CAACgB,MAAP,GAAgByD,IAAI,CAAC7C,CAArB,GAAyBM,OAAxF,EATkB,CASgF;AACrG,GAVD,EAhBY,CA4BZ;;AACA/B,EAAAA,GAAG,CAACsD,SAAJ,GAAgB,OAAhB;AACAtD,EAAAA,GAAG,CAACuD,IAAJ,GAAW,YAAX;AACAvD,EAAAA,GAAG,CAAC0D,QAAJ,kBAAuBzB,KAAvB,GAAgC,EAAhC,EAAoC,EAApC,EA/BY,CA+B8B;AAE1C;;AACAjC,EAAAA,GAAG,CAAC0D,QAAJ,iBAAsBtB,SAAtB,GAAmC,EAAnC,EAAuC,EAAvC,EAlCY,CAkCiC;AAE7C;;AACA,MAAIF,UAAJ,EAAgB;AACZlC,IAAAA,GAAG,CAAC4E,SAAJ,CAAcxD,aAAd,EAA6BvB,MAAM,CAACa,KAAP,GAAe,CAA5C,EAA+Cb,MAAM,CAACgB,MAAP,GAAgB,CAA/D,EAAkEhB,MAAM,CAACa,KAAP,GAAe,CAAjF,EAAoFb,MAAM,CAACgB,MAAP,GAAgB,CAApG,EADY,CAC6F;AAC5G;AACJ;;AAED,SAAS6B,SAAT,GAAqB;AACjBnB,EAAAA,IAAI,CAACE,CAAL,GAAS5B,MAAM,CAACgB,MAAP,GAAgB,CAAzB;AACAU,EAAAA,IAAI,CAACK,QAAL,GAAgB,CAAhB;AACAC,EAAAA,KAAK,GAAG,EAAR;AACAI,EAAAA,KAAK,GAAG,CAAR;AACAD,EAAAA,UAAU,GAAG,CAAb;AACAE,EAAAA,UAAU,GAAG,KAAb,CANiB,CAMG;;AACpBC,EAAAA,KAAK,GAAG,CAAR,CAPiB,CAOL;;AACZJ,EAAAA,OAAO,GAAGlC,MAAM,CAACgB,MAAP,GAAgB,CAA1B,CARiB,CAQa;;AAC9BkD,EAAAA,eAAe,GAAG1C,gBAAlB,CATiB,CASoB;AAErC;;AACAgB,EAAAA,YAAY,CAAC6C,UAAb,CAAwB,WAAxB;AAEAhF,EAAAA,WAAW,CAAC6C,KAAZ,CAAkBC,OAAlB,GAA4B,MAA5B,CAdiB,CAcoB;;AACrC7C,EAAAA,KAAK,CAAC4C,KAAN,CAAYC,OAAZ,GAAsB,MAAtB,CAfiB,CAec;AAClC,C,CAGD;;;AACA,SAASY,QAAT,GAAoB;AAChBI,EAAAA,MAAM;AACNW,EAAAA,IAAI;AACJQ,EAAAA,qBAAqB,CAACvB,QAAD,CAArB;AACH","sourcesContent":["const canvas = document.getElementById('gameCanvas');\r\nconst ctx = canvas.getContext('2d');\r\nconst startButton = document.getElementById('startButton');  // Кнопка \"Начать игру\"\r\nconst title = document.getElementById('title');  // Заголовок \"Flappy Mario\"\r\nconst helpButton = document.getElementById('helpButton'); // Кнопка \"Help\"\r\nconst helpModal = document.getElementById('helpModal'); // Модальное окно\r\nconst closeHelpButton = document.getElementById('closeHelp'); // Кнопка \"Закрыть\" в модальном окне\r\n\r\n// Звук проигрыша\r\nconst gameOverSound = new Audio('https://www.myinstants.com/media/sounds/roblox-death-sound-effect.mp3');\r\n\r\n// Установка размера canvas на весь экран\r\nfunction resizeCanvas() {\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n}\r\nresizeCanvas();\r\nwindow.addEventListener('resize', resizeCanvas);  // Обновляем размеры канваса при изменении окна\r\n\r\n// Загрузка изображений для верхней и нижней части труб\r\nconst pipeTop = new Image();\r\npipeTop.src = 'https://png.klev.club/uploads/posts/2024-04/png-klev-club-o9dc-p-truba-iz-mario-png-16.png';  // Путь к изображению верхней части трубы\r\n\r\nconst pipeBottom = new Image();\r\npipeBottom.src = 'https://png.klev.club/uploads/posts/2024-04/png-klev-club-o9dc-p-truba-iz-mario-png-16.png';  // Путь к изображению нижней части трубы\r\n\r\n// Картинка для поражения (Потрачено)\r\nconst gameOverImage = new Image();\r\ngameOverImage.src = 'https://png.klev.club/uploads/posts/2024-04/thumbs/png-klev-club-kn72-p-potracheno-png-8.png'; // Картинка для поражения\r\n\r\n// Фон для первого уровня\r\nconst backgroundImage1 = new Image();\r\nbackgroundImage1.src = 'https://fotoblik.ru/wp-content/uploads/2023/09/stardew-valley-oboi-13.webp'; // Фон игры для первого уровня\r\n\r\n// Фон для второго уровня\r\nconst backgroundImage2 = new Image();\r\nbackgroundImage2.src = 'https://kartinkin.net/uploads/posts/2021-03/1616042272_29-p-pikselnii-fon-dlya-igri-32.jpg'; // Фон для второго уровня\r\n\r\nlet bird = {\r\n    x: 150,\r\n    y: canvas.height / 2,\r\n    width: 80,  // Увеличиваем ширину птицы\r\n    height: 80, // Увеличиваем высоту птицы\r\n    gravity: 0.3,\r\n    lift: -12,  // Увеличиваем силу отталкивания, чтобы птица прыгала выше\r\n    velocity: 0\r\n};\r\n\r\nlet pipes = [];\r\nlet pipeWidth = 80;  // Ширина трубы\r\nlet pipeGap = canvas.height / 3; // Зазор между колоннами (по умолчанию для первого уровня)\r\nlet frameCount = 0;\r\nlet score = 0;\r\nlet isGameOver = false; // Флаг для проверки поражения\r\nlet level = 1;  // Переменная для уровня\r\n\r\n// Загружаем лучший результат из localStorage\r\nlet bestScore = localStorage.getItem('bestScore') ? parseInt(localStorage.getItem('bestScore')) : 0;\r\n\r\n// Управление\r\ndocument.addEventListener('keydown', (e) => {\r\n    if (e.key === ' ' || e.key === 'Spacebar') {  // Для пробела\r\n        if (isGameOver) {\r\n            resetGame(); // Сбрасываем игру, если она окончена\r\n        } else {\r\n            bird.velocity = bird.lift;\r\n            const beepSound = new Audio('https://zvukitop.com/wp-content/uploads/2021/01/pryjok-2.mp3');\r\n            beepSound.volume = 0.1;  // Уменьшаем громкость до 20%\r\n            beepSound.play();  // Воспроизводим новый звук при нажатии на пробел\r\n        }\r\n    }\r\n});\r\n\r\n// Звук, который будет воспроизводиться при загрузке страницы\r\nconst helloSound = new Audio('https://www.myinstants.com/media/sounds/meme-okay-lets-go.mp3');\r\n\r\n// Показываем кнопку \"Начать игру\" перед началом игры\r\nstartButton.addEventListener('click', () => {\r\n    startButton.style.display = 'none'; // Скрываем кнопку после старта\r\n    title.style.display = 'none'; // Скрываем заголовок\r\n    helloSound.play();  // Воспроизводим звук при старте игры\r\n\r\n    // Показываем канвас\r\n    canvas.style.display = 'block'; // Показываем канвас только после старта игры\r\n\r\n    // Запуск обратного отсчета\r\n    startCountdown();\r\n});\r\n\r\n// Функция обратного отсчета\r\nlet countdown = 3;\r\nfunction startCountdown() {\r\n    const countdownInterval = setInterval(() => {\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);  // Очистить canvas\r\n        ctx.fillStyle = 'black';\r\n        ctx.font = '100px Arial';\r\n        ctx.textAlign = 'center';\r\n        ctx.textBaseline = 'middle';\r\n        ctx.fillText(countdown, canvas.width / 2, canvas.height / 2);  // Пишем цифры на экране\r\n\r\n        // Если отсчет закончился, начинаем игру\r\n        if (countdown === 0) {\r\n            clearInterval(countdownInterval); // Останавливаем отсчет\r\n            gameLoop(); // Начинаем игру\r\n        }\r\n\r\n        countdown--;  // Уменьшаем цифру на 1\r\n    }, 500);  // 0.5 секунды для каждого числа\r\n}\r\n\r\n// Открытие модального окна Help\r\nhelpButton.addEventListener('click', () => {\r\n    helpModal.style.display = 'flex';\r\n});\r\n\r\n// Закрытие модального окна Help\r\ncloseHelpButton.addEventListener('click', () => {\r\n    helpModal.style.display = 'none';\r\n});\r\n\r\n// Переход на второй уровень при достижении 20 очков\r\nfunction levelUp() {\r\n    alert(\"Поздравляю! Вы прошли первый уровень!\");\r\n    level = 2;  // Устанавливаем второй уровень\r\n    backgroundImage = backgroundImage2; // Меняем фон на второй уровень\r\n    pipeGap = canvas.height / 4;  // Уменьшаем зазор между трубами на втором уровне\r\n}\r\n\r\n// Game loop\r\nfunction update() {\r\n    if (isGameOver) return; // Если игра окончена, не обновляем состояние игры\r\n\r\n    // Bird physics\r\n    bird.velocity += bird.gravity;\r\n    bird.velocity *= 0.95;\r\n    bird.y += bird.velocity;\r\n\r\n    // Keep bird in bounds\r\n    if (bird.y > canvas.height - bird.height) bird.y = canvas.height - bird.height;\r\n    if (bird.y < 0) bird.y = 0;\r\n\r\n    // Pipe generation\r\n    if (frameCount % 200 === 0) { // Увеличен интервал появления колонн\r\n        let pipeY = Math.random() * (canvas.height - pipeGap - 50) + 25;\r\n        pipes.push({ x: canvas.width, y: pipeY });\r\n    }\r\n\r\n    // Pipe movement\r\n    pipes = pipes.filter(pipe => pipe.x + pipeWidth > 0);\r\n    pipes.forEach(pipe => {\r\n        pipe.x -= 2;\r\n\r\n        // Check for collision\r\n        if (\r\n            bird.x < pipe.x + pipeWidth &&\r\n            bird.x + bird.width > pipe.x &&\r\n            (bird.y < pipe.y || bird.y + bird.height > pipe.y + pipeGap)\r\n        ) {\r\n            isGameOver = true; // Устанавливаем флаг проигрыша\r\n            if (score > bestScore) {\r\n                bestScore = score; // Если текущий результат лучше, обновляем лучший результат\r\n                localStorage.setItem('bestScore', bestScore); // Сохраняем лучший результат в localStorage\r\n            }\r\n\r\n            // Воспроизводим звук проигрыша\r\n            gameOverSound.play();\r\n        }\r\n\r\n        // Score tracking\r\n        if (pipe.x + pipeWidth === bird.x) {\r\n            score++;\r\n        }\r\n    });\r\n\r\n    // Переход на второй уровень при достижении 20 очков\r\n    if (score >= 2 && level === 1) {\r\n        levelUp();\r\n    }\r\n\r\n    // Показать сообщение о победе при достижении 10 очков на втором уровне\r\nif (score >= 3 && level === 2) {\r\n    // Сохраняем результат в localStorage перед переходом на страницу победы\r\n    localStorage.setItem('finalScore', score);\r\n    window.location.href = \"win.html\"; // Перенаправляем на страницу с поздравлением\r\n}\r\n\r\n\r\n    frameCount++;\r\n}\r\n\r\nfunction draw() {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    // Draw background в зависимости от уровня\r\n    if (level === 1) {\r\n        ctx.drawImage(backgroundImage1, 0, 0, canvas.width, canvas.height);\r\n    } else {\r\n        ctx.drawImage(backgroundImage2, 0, 0, canvas.width, canvas.height);\r\n    }\r\n\r\n    // Draw bird (заменим желтый квадрат на изображение)\r\n    const birdImage = new Image();\r\n    birdImage.src = 'https://png.klev.club/uploads/posts/2024-03/png-klev-club-p-mario-png-33.png';  // Путь к изображению птицы\r\n    ctx.drawImage(birdImage, bird.x, bird.y, bird.width, bird.height);\r\n\r\n    // Draw pipes with images\r\n    pipes.forEach(pipe => {\r\n        // Верхняя часть трубы (перевернутая)\r\n        ctx.save(); // Сохраняем текущие настройки контекста\r\n        ctx.translate(pipe.x, pipe.y); // Перемещаем начало координат\r\n        ctx.scale(1, -1); // Переворачиваем по оси Y\r\n        ctx.drawImage(pipeTop, 0, 0, pipeWidth, pipe.y);  // Рисуем верхнюю трубу с правильными пропорциями\r\n        ctx.restore(); // Восстанавливаем настройки контекста\r\n\r\n        // Нижняя часть трубы\r\n        ctx.drawImage(pipeBottom, pipe.x, pipe.y + pipeGap, pipeWidth, canvas.height - pipe.y - pipeGap); // Рисуем нижнюю трубу\r\n    });\r\n\r\n    // Draw score\r\n    ctx.fillStyle = 'black';\r\n    ctx.font = '20px Arial';\r\n    ctx.fillText(`Score: ${score}`, 50, 40);  // Располагаем \"Score\"\r\n\r\n    // Draw best score\r\n    ctx.fillText(`Best: ${bestScore}`, 50, 70);  // Располагаем \"Best\"\r\n\r\n    // Если игра окончена, показываем картинку\r\n    if (isGameOver) {\r\n        ctx.drawImage(gameOverImage, canvas.width / 4, canvas.height / 4, canvas.width / 2, canvas.height / 4);  // Отображаем картинку поражения\r\n    }\r\n}\r\n\r\nfunction resetGame() {\r\n    bird.y = canvas.height / 2;\r\n    bird.velocity = 0;\r\n    pipes = [];\r\n    score = 0;\r\n    frameCount = 0;\r\n    isGameOver = false; // Сбрасываем флаг проигрыша\r\n    level = 1;  // Возвращаем уровень на 1\r\n    pipeGap = canvas.height / 3;  // Возвращаем зазор между трубами на первый уровень\r\n    backgroundImage = backgroundImage1;  // Возвращаем фон на первый уровень\r\n\r\n    // Удаляем лучший результат из localStorage при сбросе игры\r\n    localStorage.removeItem('bestScore');\r\n\r\n    startButton.style.display = 'none';  // Скрываем кнопку \"Начать игру\"\r\n    title.style.display = 'none';  // Скрываем заголовок \"Flappy Mario\"\r\n}\r\n\r\n\r\n// Main game loop\r\nfunction gameLoop() {\r\n    update();\r\n    draw();\r\n    requestAnimationFrame(gameLoop);\r\n}\r\n"],"file":"game.dev.js"}