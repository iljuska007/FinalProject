"use strict";var canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),startButton=document.getElementById("startButton"),title=document.getElementById("title"),helpButton=document.getElementById("helpButton"),helpModal=document.getElementById("helpModal"),closeHelpButton=document.getElementById("closeHelp"),gameOverSound=new Audio("https://www.myinstants.com/media/sounds/roblox-death-sound-effect.mp3");function resizeCanvas(){canvas.width=window.innerWidth,canvas.height=window.innerHeight}resizeCanvas(),window.addEventListener("resize",resizeCanvas);var pipeTop=new Image;pipeTop.src="https://png.klev.club/uploads/posts/2024-04/png-klev-club-o9dc-p-truba-iz-mario-png-16.png";var pipeBottom=new Image;pipeBottom.src="https://png.klev.club/uploads/posts/2024-04/png-klev-club-o9dc-p-truba-iz-mario-png-16.png";var gameOverImage=new Image;gameOverImage.src="https://png.klev.club/uploads/posts/2024-04/thumbs/png-klev-club-kn72-p-potracheno-png-8.png";var backgroundImage1=new Image;backgroundImage1.src="https://fotoblik.ru/wp-content/uploads/2023/09/stardew-valley-oboi-13.webp";var backgroundImage2=new Image;backgroundImage2.src="https://kartinkin.net/uploads/posts/2021-03/1616042272_29-p-pikselnii-fon-dlya-igri-32.jpg";var bird={x:150,y:canvas.height/2,width:80,height:80,gravity:.3,lift:-12,velocity:0},pipes=[],pipeWidth=80,pipeGap=canvas.height/3,frameCount=0,score=0,isGameOver=!1,level=1,bestScore=localStorage.getItem("bestScore")?parseInt(localStorage.getItem("bestScore")):0;document.addEventListener("keydown",function(e){if(" "===e.key||"Spacebar"===e.key)if(isGameOver)resetGame();else{bird.velocity=bird.lift;var t=new Audio("https://zvukitop.com/wp-content/uploads/2021/01/pryjok-2.mp3");t.volume=.1,t.play()}});var helloSound=new Audio("https://www.myinstants.com/media/sounds/meme-okay-lets-go.mp3");startButton.addEventListener("click",function(){startButton.style.display="none",title.style.display="none",helloSound.play(),canvas.style.display="block",startCountdown()});var countdown=3;function startCountdown(){var e=setInterval(function(){ctx.clearRect(0,0,canvas.width,canvas.height),ctx.fillStyle="black",ctx.font="100px Arial",ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(countdown,canvas.width/2,canvas.height/2),0===countdown&&(clearInterval(e),gameLoop()),countdown--},500)}function levelUp(){alert("Поздравляю! Вы прошли первый уровень!"),level=2,backgroundImage=backgroundImage2,pipeGap=canvas.height/4}function update(){if(!isGameOver){if(bird.velocity+=bird.gravity,bird.velocity*=.95,bird.y+=bird.velocity,bird.y>canvas.height-bird.height&&(bird.y=canvas.height-bird.height),bird.y<0&&(bird.y=0),frameCount%200==0){var e=Math.random()*(canvas.height-pipeGap-50)+25;pipes.push({x:canvas.width,y:e})}(pipes=pipes.filter(function(e){return 0<e.x+pipeWidth})).forEach(function(e){e.x-=2,bird.x<e.x+pipeWidth&&bird.x+bird.width>e.x&&(bird.y<e.y||bird.y+bird.height>e.y+pipeGap)&&(isGameOver=!0,bestScore<score&&(bestScore=score,localStorage.setItem("bestScore",bestScore)),gameOverSound.play()),e.x+pipeWidth===bird.x&&score++}),10<=score&&1===level&&levelUp(),20<=score&&2===level&&(localStorage.setItem("finalScore",score),window.location.href="win.html"),frameCount++}}function draw(){ctx.clearRect(0,0,canvas.width,canvas.height),1===level?ctx.drawImage(backgroundImage1,0,0,canvas.width,canvas.height):ctx.drawImage(backgroundImage2,0,0,canvas.width,canvas.height);var e=new Image;e.src="https://png.klev.club/uploads/posts/2024-03/png-klev-club-p-mario-png-33.png",ctx.drawImage(e,bird.x,bird.y,bird.width,bird.height),pipes.forEach(function(e){ctx.save(),ctx.translate(e.x,e.y),ctx.scale(1,-1),ctx.drawImage(pipeTop,0,0,pipeWidth,e.y),ctx.restore(),ctx.drawImage(pipeBottom,e.x,e.y+pipeGap,pipeWidth,canvas.height-e.y-pipeGap)}),ctx.fillStyle="black",ctx.font="20px Arial",ctx.fillText("Score: ".concat(score),50,40),ctx.fillText("Best: ".concat(bestScore),50,70),isGameOver&&ctx.drawImage(gameOverImage,canvas.width/4,canvas.height/4,canvas.width/2,canvas.height/4)}function resetGame(){bird.y=canvas.height/2,bird.velocity=0,frameCount=score=0,isGameOver=!(pipes=[]),level=1,pipeGap=canvas.height/3,backgroundImage=backgroundImage1,localStorage.removeItem("bestScore"),startButton.style.display="none",title.style.display="none"}function gameLoop(){update(),draw(),requestAnimationFrame(gameLoop)}helpButton.addEventListener("click",function(){helpModal.style.display="flex"}),closeHelpButton.addEventListener("click",function(){helpModal.style.display="none"});
//# sourceMappingURL=game.min.js.map
